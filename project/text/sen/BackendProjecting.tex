\subsection{Проектування та прототипування back-end частини}

Для обміну інформацією між користувацьким додатком та back-end частиною використовується протокол передачі гіпертекстових даних HTTP. Передачу даних забезпечує стек транспортних протоколів TCP/IP.
Одним з способів побудови мереживих HTTP-додатків є використання  асинхронного подієвого JavaScript–оточення Node. Для кожного з’єднання викликається функція зворотнього виклику, проте коли з’єднань немає Node засинає.

У Node не має функцій, що працюють напряму з I/O, тому процес не блокується ніколи. Як результат, на Node легко розробляти масштабовані системи \cite{zeiss2015node}.
Node широко використовує подієву модель, він приймає цикл подій за основу оточення, замість того, щоб використовувати його в якості бібліотеки. В інших системах відбувається блокування виклику для запуску циклу подій.

При розробці використано бібліотеку Express — гнучкий фреймворк для веб-застосунків, побудованих на Node.js, що надає широкий набір функціональності, полегшуючи створення надійних API.

Express забезпечує тонкий прошарок базової функціональності для веб-застосунків, що не спотворює звичну та зручну функціональність Node.js., при отриманні запиту він оброблюватиметься відповідно до визначення маршруту (рис.~\ref{fig:Route}), де app є екземпляром express, METHOD є методом HTTP-запиту, PATH є шляхом на сервері, HANDLER є функцією-обробником, що спрацьовує, коли даний маршрут затверджено як співпадаючий.

\addCodeAsImg{\lstinputlisting[numbers=left]{code/AppMethod.js}}{Структура визначення маршрутів}{fig:Route}

\subsubsection{Роути}

В процесі роботи використовується протокол прикладного рівня HTTP. Обмін повідомленнями йде за схемою «запит-відповідь». Для ідентифікації ресурсів HTTP використовує URI. 

В додатку обробляються основні  HTTP методи для взаємодії об’єктами (рис.~\ref{fig:ApiAccess}). 

Протокол HTTP не зберігає свого стану між парами «запит-відповідь». Компоненти, що використовують HTTP, можуть самостійно здійснювати збереження інформації про стан, пов'язаний з останніми запитами та відповідями. 

Одним з розповсюджених способів реалізації цього можна назвати так звані cookies — невеликі записи, що зберігаються браузером. Зазвичай, вони встановлюються при виконанні користувачем певних дій та надсилаються серверу разом з наступними запитами. 

На рис.~\ref{fig:AppSignUp} зображено процес створення адміністратором нового користувача системи.

\addCodeAsImg{\input{uml/AppSignUp}}{Процес створення адміністратором нового користувача системи}{fig:AppSignUp}

Після отримання зазначеного POST запиту, сервер перевірить, чи має користувач відповідні права (блок Auth рис.~\ref{fig:CreateOperation}), створить об’єкт користувача з відповідними правами та збереже його в базі даних.

Створений користувач може входити до системи (рис.~\ref{fig:AppSignIn}) для виконання певних задач з користування системою.

\addCodeAsImg{\input{uml/AppSignIn}}{Вхід користувача до системи}{fig:AppSignIn}

Можна зазначити, що адміністратор теж є користувачем, проте з особливими правами (диференціація на рис.~\ref{fig:Route}).

\subsubsection{Моделі}

В процесі проектування закладено серію моделей, що відповідають об’єктам предметної області. В рамках системи зберігаються в базі даних у вигляді таблиць з певними взаємозвязками (реляційну модель описано в підрозділі \ref{subsection:relationModel}). Для доступу до даних використовуються основні HTTP методи, що відповідають операціям CRUD (від Create, Read, Update, Delete), їх перелічено нижче.

\paragraph{GET}
\addCodeAsImg{\input{uml/ReadOperation}}{Виконання запиту на отримання об’єкта}{fig:ReadOperation}

Запитує вміст вказаного ресурсу, який може приймати параметри, що передаються в URI (рис.~\ref{fig:ReadOperation}). Згідно зі стандартом, ці запити є ідемпотентними — багатократне повторення одного і того ж запиту GET приводить до однакових результатів (за умови, що сам ресурс не змінився за час між запитами).

В запропонованій реалізації запит GET має дві версії — з параметром (ID) та без нього. Останній виконує дію (надає користувачу) не до конкретного об’єкту, а до всієї множини, що є необхідним в певних ситуаціях (наприклад, відображення списку всіх викладачів за певним критерієм).

\paragraph{HEAD}

Аналогічний GET, за винятком того, що у відповіді сервера відсутнє тіло. Це може бути необхідно для отримання мета-інформації.

\paragraph{POST}
\addCodeAsImg{\input{uml/CreateOperation}}{Виконання запиту на створення з аутентифікацією}{fig:CreateOperation}

Передає дані (наприклад, з форми на веб-сторінці) заданому ресурсу. При цьому передані дані включаються в тіло запиту. На відміну від методу GET, метод POST не є ідемпотентним, тобто багатократне повторення одних і тих же запитів POST може повертати різні результати (рис.~\ref{fig:CreateOperation}).

На першому етапі відбувається перевірка доступу користувача это створення об’єкту цього типу (авторизація), відповідно до прав доступу (рис.~\ref{fig:ApiAccess}).

\paragraph{PUT}
\addCodeAsImg{\input{uml/UpdateOperation}}{Виконання запиту на модифікацію існуючого об’єкту}{fig:UpdateOperation}

Завантажує вказаний ресурс на сервер. В розроблюваній системі використовується для редагування існуючих даних (рис.~\ref{fig:UpdateOperation}). 

В процесі виконання, спочатку з бази даних силами ORM вибирається конкретний об’єкт, в нього вносяться зміни, після чого він записується до сховища на заміну попередньої версії.

\paragraph{PATCH}

Завантажує частину ресурсу на сервер. При розробці необхідності у використанні не знайдено.

\paragraph{DELETE}
\addCodeAsImg{\input{uml/DeleteOperation}}{Виконання запиту на видалення об’єкту}{fig:DeleteOperation}

Видаляє вказаний ресурс.
Слід звернути увагу, що в процесі виконання запиту на видалення об’єкту в системі, видалення як такого не відбувається. Замість цього в окреме поле таблиці вноситься інформація про час виконання цієї процедури (рис.~\ref{fig:DeleteOperation}).

Такий спосіб реалізації дозволяє з однієї сторони приховати дані, відмічені як видалені від подальшого використання, а з іншої — зберегти їх там, де вони вже використовуються. В іншому випадку, у зв’язку з реляційністю бази потрібно було б вирішувати дилему — або проводити циклічне видалення для збереження цілісності даних, втрачаючи всі об’єкти, що посилаються на той, що видаляється; або ускладнювати структури даних, що потенційно призведе до дублювання даних.

\subsubsection{Публічне API}
\addimg{QRcode.png}{0.25}{Приклад QR-коду з посиланням}{fig:QRcode}

В процесі проектування створено структуру роутів, котра може використовуватися сторонніми сервісами, у тому числі — і без авторизації в системі, що дозволяє отримувати інформацію про розклади власними силами для подальшого використання тим чи іншим чином. 

Також було проаналізовано перспективи при використанні QR-кодів (рис.~\ref{fig:QRcode}) з метою супроводження традиційного паперового розкладу (та інших документів), що публікується на стендах.

Хоча термін «QR code» є зареєстрованим товарним знаком японської корпорації «DENSO Corporation», їх використання не обкладається ніякими ліцензійними відрахуваннями, коди описані та опубліковані як стандарти ISO \cite{воронкін2014можливості}. Основна перевага QR-коду – легке розпізнавання скануючим обладнанням (за допомогою мобільного телефону, планшета або ноутбука з камерою, на яких встановлена програма для зчитування кодів, тощо).

Одним з способів використання QR-кодів в навчальному процесі, крім запропонованих (зокрема, задля забезпечення швидкого доступу до навчально-методичного забезпечення, довідкової літератури, веб-сервісів навчального закладу) \cite[146]{воронкін2014можливості},  можна назвати надання доступу до електронної версії розкладу.
